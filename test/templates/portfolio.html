{% extends "layout.html" %}

{% block title %}
    Portfolio
{% endblock %}

{% block optres %}
    <script src="static/portfolio.js"></script>
{% endblock %}

{% block main %}
    <div class="p_table">
        <table class="table table-striped table-borderless table-hover">
            <thead>
                <tr>
                    <th class="left">Symbol</th>
                    <th class="left">Shares</th>
                    <th class="right">Price of Stock (Per Share)</th>
                    <th class="right">Total Value</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for stock in stocks %}
                    <tr>
                        <td class="left">{{ stock["symbol"] }}</td>
                        <td class="left">{{ stock["shares"] }}</td>
                        <td class="right">{{ stock["price"] }}</td>
                        <td class="right">{{ stock["total"] }}</td>
                        <td>
                            <button name="buy_button" class="btn btn-primary" value="{{ stock['symbol'] }}" type="button">Buy</button>
                            <button name="sell_button" class="btn btn-primary" value="{{ stock['symbol'] }}" type="button">Sell</button>
                        </td>
                    </tr>
                {% endfor %}
                    <tr style="height: 40px;">
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr class="right">
                        <td></td>
                        <td></td>
                        <td style="font-weight: 700;">Sum</td>
                        <td>{{ sum }}</td>
                        <td></td>
                    </tr>
                    <tr class="right">
                        <td></td>
                        <td></td>
                        <td style="font-weight: 700;">Balance</td>
                        <td>{{ balance }}</td>
                        <td></td>
                    </tr>
                    <tr class="right">
                        <td></td>
                        <td></td>
                        <td style="font-weight: 700;">Total</td>
                        <td>{{ total }}</td>
                        <td></td>
                    </tr>
            </tbody>
        </table>
    </div>

    <div id="popup" class="popup" style="display: none;">
        <h4>Symbol: <span id="stock_symbol"></span></h4>
        <form id="popup_form" action="/" method="post">
            <div class="mb-3">
                <input type="hidden" id="symbol" name="symbol" value="">
            </div>
            <div class="mb-3">
                <input autocomplete="off" class="form-control mx-auto w-auto" id="shares1" name="shares" required placeholder="Number of Shares" type="Number" min="1">
            </div>
            <div id="warning" style="color: red; padding-bottom: 10px;"></div>
            <button id="popup_button" type="submit" class="btn btn-primary"></button>
            <button id="cancel_button" type="button" class="btn btn-primary">Cancel</button>
        </form>
    </div>

{% endblock %}